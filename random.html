<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>랜덤 숫자 추출기</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
    .wrap { max-width: 560px; margin: 0 auto; }
    h1 { font-size: 20px; margin: 0 0 16px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
    label { font-size: 13px; color: #333; display: block; margin-bottom: 6px; }
    input { width: 100%; padding: 10px 12px; font-size: 14px; box-sizing: border-box; }
    .btns { display: flex; gap: 8px; margin-top: 8px; }
    button { padding: 10px 12px; font-size: 14px; cursor: pointer; }
    .note { font-size: 12px; color: #666; margin-top: 10px; }
    .out { margin-top: 16px; padding: 12px; border: 1px solid #ddd; min-height: 44px; }
    .err { color: #b00020; font-size: 13px; margin-top: 8px; }
    .pill { display: inline-block; padding: 6px 10px; border: 1px solid #ddd; border-radius: 999px; margin: 4px 6px 0 0; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>랜덤 숫자 추출기 (중복 없이)</h1>

    <div class="row">
      <div>
        <label for="min">숫자 범위 (최소)</label>
        <input id="min" type="number" value="1" />
      </div>
      <div>
        <label for="max">숫자 범위 (최대)</label>
        <input id="max" type="number" value="38" />
      </div>
    </div>

    <div class="row">
      <div>
        <label for="count">추첨할 개수</label>
        <input id="count" type="number" value="2" min="1" />
      </div>
      <div>
        <label for="mode">추첨 방식</label>
        <select id="mode" style="width:100%; padding:10px 12px; font-size:14px;">
          <option value="unique" selected>중복 없음</option>
          <option value="repeat">중복 허용</option>
        </select>
      </div>
    </div>

    <div class="btns">
      <button id="drawBtn">추첨</button>
      <button id="resetBtn" type="button">초기화</button>
      <button id="copyBtn" type="button">결과 복사</button>
    </div>

    <div class="note">예) 최소 1, 최대 45, 개수 2 → 2개 랜덤 추첨</div>
    <div id="error" class="err"></div>

    <div class="out" id="output" aria-live="polite"></div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function randInt(min, max) {
      // min/max 포함
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function drawUnique(min, max, count) {
      const rangeSize = max - min + 1;
      if (count > rangeSize) {
        throw new Error(`중복 없이 ${count}개를 뽑으려면 범위가 최소 ${count}개 이상이어야 합니다. (현재 범위: ${rangeSize}개)`);
      }
      // Fisher–Yates shuffle
      const arr = [];
      for (let n = min; n <= max; n++) arr.push(n);
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr.slice(0, count);
    }

    function drawRepeat(min, max, count) {
      const out = [];
      for (let i = 0; i < count; i++) out.push(randInt(min, max));
      return out;
    }

    function renderResult(nums) {
      const output = $("output");
      output.innerHTML = nums.map(n => `<span class="pill">${n}</span>`).join("");
    }

    function setError(msg) {
      $("error").textContent = msg || "";
    }

    function getValues() {
      const min = Number($("min").value);
      const max = Number($("max").value);
      const count = Number($("count").value);
      const mode = $("mode").value;
      return { min, max, count, mode };
    }

    function validate({min, max, count}) {
      if (!Number.isFinite(min) || !Number.isFinite(max) || !Number.isFinite(count)) {
        throw new Error("숫자를 올바르게 입력해주세요.");
      }
      if (!Number.isInteger(min) || !Number.isInteger(max) || !Number.isInteger(count)) {
        throw new Error("정수(소수점 없는 숫자)로 입력해주세요.");
      }
      if (min > max) throw new Error("최소값은 최대값보다 클 수 없습니다.");
      if (count <= 0) throw new Error("추첨 개수는 1 이상이어야 합니다.");
    }

    function doDraw() {
      try {
        setError("");
        const v = getValues();
        validate(v);

        const nums = (v.mode === "repeat")
          ? drawRepeat(v.min, v.max, v.count)
          : drawUnique(v.min, v.max, v.count);

        renderResult(nums);
      } catch (e) {
        setError(e.message || String(e));
        $("output").textContent = "";
      }
    }

    $("drawBtn").addEventListener("click", doDraw);

    $("resetBtn").addEventListener("click", () => {
      $("min").value = 1;
      $("max").value = 10;
      $("count").value = 2;
      $("mode").value = "unique";
      setError("");
      $("output").textContent = "";
    });

    $("copyBtn").addEventListener("click", async () => {
      const text = $("output").textContent.trim();
      if (!text) { setError("복사할 결과가 없습니다. 먼저 추첨하세요."); return; }
      try {
        await navigator.clipboard.writeText(text.replace(/\s+/g, " ").trim());
        setError("✅ 결과를 클립보드에 복사했습니다.");
        setTimeout(() => setError(""), 1500);
      } catch {
        setError("복사에 실패했습니다. 결과를 드래그해서 수동 복사해주세요.");
      }
    });

    // Enter 키로도 추첨
    ["min","max","count"].forEach(id => {
      $(id).addEventListener("keydown", (e) => {
        if (e.key === "Enter") doDraw();
      });
    });
  </script>
</body>
</html>
